【このツールでやりたいこと】

1. 賃貸物件の初期費用見積書をAIで分析し、不当な費用を洗い出す
   - ユーザーがスマートフォンで見積書と募集図面を撮影するだけで、AIが自動的に診断を行う
   - 見積書に記載されている各項目（敷金、礼金、仲介手数料、火災保険、24時間サポートなど）を抽出
   - 募集図面の記載と見積書を照合して、矛盾や不当な請求を特定する
   - 削減可能な金額を明確に提示し、ユーザーが交渉できる項目を洗い出す

2. ユーザーが簡単に使えるインターフェースを提供する
   - スマートフォンのカメラで直接撮影できる機能
   - 見積書は必須、募集図面は推奨（精度向上のため）
   - 条件欄を拡大して撮影できるオプション
   - 直感的で分かりやすいUIで、誰でも簡単に操作できる

3. 診断結果を分かりやすく可視化する
   - 削減可能額を大きく表示
   - 各項目ごとに「適正」「交渉可」「削除推奨」のステータスを表示
   - 払いすぎ危険度を0-100のスコアで表示（リスクゲージ）
   - AIエージェントの総評で、交渉のポイントを説明

4. エンタメ要素を追加してユーザーの興味を引く
   - 裏コマンド機能：見積書以外の画像（顔写真、動物、食べ物など）をアップロードすると、占い風の特別診断を表示
   - ポジティブな内容で「褒め倒す」形式で運勢を表示
   - 部屋探しに絡めたアドバイスを提供

5. 診断結果を共有できる機能を提供する
   - SNS（X、LINE）で診断結果をシェア
   - 24時間有効な共有リンクを生成
   - 診断結果を画像として保存できる

6. ビジネス導線を作る
   - 診断結果から不動産コンサルタントへの相談へ誘導
   - LINEでの無料相談への導線
   - プロが無料で精査するサービスへの案内


【そのためのアプローチ】

1. 画像分類による処理分岐
   - まず画像の種類を判定する（見積書/図面か、それ以外か）
   - 見積書/図面の場合：通常の診断モードで処理
   - その他の画像（顔、動物、食べ物など）の場合：裏コマンドモードで特別な診断を表示
   - これにより、ユーザーが誤って関係ない画像をアップロードしても楽しめる仕組みを作る

2. AIによる画像解析と情報抽出
   - Google Gemini APIを使用して画像から文字情報を抽出
   - 見積書から各項目の金額を読み取る
   - 募集図面から条件（敷金、礼金、仲介手数料など）を読み取る
   - 各値には必ず根拠（evidence_text）を付与し、読み取れない場合はnullにする（0にしない）

3. 図面と見積書の照合による矛盾検出
   - 図面に「無料」と記載されているのに見積書で有料になっている項目を検出
   - 図面に記載がない付帯サービス（24時間サポート、消毒など）を検出
   - 仲介手数料が0.5ヶ月を超えている場合、交渉可能として提示
   - 火災保険が相場（約16,000円）を超えている場合、交渉可能として提示

4. 診断ロジックの実装
   - 抽出フェーズ：画像から「事実」のみを抽出（診断はしない）
   - 診断フェーズ：抽出されたJSONデータのみで診断（画像は見ない）
   - 各項目ごとに適正価格を算出
   - 削減可能額を計算
   - リスクスコアを計算（払いすぎ危険度）

5. 不確実性の明示
   - 読み取りに不確実性がある項目は「要確認」として表示
   - ユーザーに手動確認を促す
   - 根拠（evidence）がない項目はnullとして扱い、断定的な判断を避ける

6. ユーザーインターフェースの設計
   - Next.jsとReactを使用したSPA（Single Page Application）
   - Tailwind CSSでモダンなデザインを実現
   - レスポンシブデザインでスマートフォンとデスクトップの両方に対応
   - カメラ機能を実装し、リアルタイムで撮影できる
   - ガイド枠を表示して、適切な撮影をサポート

7. 共有機能の実装
   - 診断結果を一時的に保存（24時間有効）
   - 一意のIDを生成して共有リンクを作成
   - 個人情報（物件名など）を除外した共有用データを作成
   - SNSシェア機能を実装（X、LINE）

8. 裏コマンド機能の実装
   - 画像分類で見積書以外と判定された場合、特別なプロンプトでAIに依頼
   - 顔写真の場合：マダム・エステートの運命鑑定
   - 動物の場合：ドクター・アニマルエステートの特別鑑定
   - 食べ物の場合：グルメ・エステート卿の三ツ星鑑定
   - 必ずポジティブな内容で、部屋探しに絡めたアドバイスを提供

9. エラーハンドリングとユーザー体験の向上
   - APIレート制限（429エラー）に対応
   - 画像サイズの検証（20MB以下）
   - ファイルタイプの検証（画像ファイルのみ）
   - 診断中の進捗表示とメッセージ
   - エラーメッセージを分かりやすく表示

10. デプロイと運用
    - Vercelにデプロイして、簡単にアクセスできるようにする
    - 環境変数でAPIキーを管理
    - 共有データはメモリ上に一時保存（本番環境ではデータベースやRedisを使用）

このアプローチにより、ユーザーは簡単に賃貸物件の初期費用を診断でき、不当な費用を見つけて交渉材料を得ることができます。また、エンタメ要素を加えることで、ユーザーの興味を引き、結果の共有を促進します。

